steps:
- name: 'gcr.io/cloud-builders/git'
  args: ['clone', '--single-branch', '--branch', '$BRANCH_NAME', 'https://source.developers.google.com/p/$PROJECT_ID/r/$REPO_NAME', '/workspace']

- name: 'gcr.io/cloud-builders/mvn'
  entrypoint: '/bin/sh'
  args:
    - '-c'
    - |
      export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
      export PATH=$JAVA_HOME/bin:$PATH
      mvn clean install
  dir: 'springboot-gcp-assignment-main/springboot-gcp-assignment-main'

- name: 'gcr.io/cloud-builders/gcloud'
  args: ['app', 'deploy']
  dir: 'springboot-gcp-assignment-main/springboot-gcp-assignment-main'
